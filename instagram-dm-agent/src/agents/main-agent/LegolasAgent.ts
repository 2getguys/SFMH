/**
 * –ö–ª–∞—Å, —â–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î –ì–æ–ª–æ–≤–Ω–æ–≥–æ –ê–≥–µ–Ω—Ç–∞ - –õ–µ–≥–æ–ª–∞—Å–∞.
 * –í—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –æ—Å–Ω–æ–≤–Ω—É –ª–æ–≥—ñ–∫—É —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è –∑ –∫–ª—ñ—î–Ω—Ç–æ–º, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –º–µ—Ç–æ–¥–æ–ª–æ–≥—ñ—é AIDA,
 * –ø—Ä–æ–º–ø—Ç–∏, —Ç–∞ –≤–∑–∞—î–º–æ–¥—ñ—é –∑ —Å—É–±–∞–≥–µ–Ω—Ç–∞–º–∏.
 */

// –ü–æ–∫–∏ —â–æ —Ç—É—Ç –Ω–µ –±—É–¥–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ OpenAI –∞–±–æ —ñ–Ω—à–∏—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤.
// –¶–µ –±—É–¥–µ –¥–æ–¥–∞–Ω–æ –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –µ—Ç–∞–ø–∞—Ö.

class LegolasAgent {
    constructor() {
        console.log('–õ–µ–≥–æ–ª–∞—Å –ê–≥–µ–Ω—Ç —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ! –ì–æ—Ç–æ–≤–∏–π –¥–æ —Ä–æ–±–æ—Ç–∏. üßùüèª‚Äç‚ôÇÔ∏è');
        // –¢—É—Ç –≤ –º–∞–π–±—É—Ç–Ω—å–æ–º—É –º–æ–∂–µ –±—É—Ç–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—Ä–æ–º–ø—Ç—ñ–≤, –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å,
        // —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–æ–¥–µ–ª–µ–π LLM, –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –ø–∞–º'—è—Ç—ñ —á–∞—Ç—É —Ç–æ—â–æ.
    }

    /**
     * –û–±—Ä–æ–±–ª—è—î –Ω–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
     * @param senderId ID –≤—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (–∫–ª—ñ—î–Ω—Ç–∞).
     * @param messageText –¢–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—ñ–¥ –∫–ª—ñ—î–Ω—Ç–∞.
     */
    public async handleMessage(senderId: string, messageText: string): Promise<void> {
        console.log(`\n--- –õ–µ–≥–æ–ª–∞—Å –ê–≥–µ–Ω—Ç –æ—Ç—Ä–∏–º–∞–≤ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è ---`);
        console.log(`–í—ñ–¥–ø—Ä–∞–≤–Ω–∏–∫ (senderId): ${senderId}`);
        console.log(`–¢–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: "${messageText}"`);

        // TODO: –¢—É—Ç –±—É–¥–µ –æ—Å–Ω–æ–≤–Ω–∞ –ª–æ–≥—ñ–∫–∞ –∞–≥–µ–Ω—Ç–∞:
        // 1. –û—Ç—Ä–∏–º–∞–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—ó —á–∞—Ç—É –¥–ª—è —Ü—å–æ–≥–æ senderId (–∑ Postgres Chat Memory).
        // 2. –§–æ—Ä–º—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—É –¥–æ LLM (OpenAI) –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —ñ—Å—Ç–æ—Ä—ñ—ó —Ç–∞ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç—É –õ–µ–≥–æ–ª–∞—Å–∞.
        // 3. –û–±—Ä–æ–±–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤—ñ–¥ LLM.
        // 4. –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ, –≤–∏–∫–ª–∏–∫ —Å—É–±–∞–≥–µ–Ω—Ç—ñ–≤ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, sfmh_base –¥–ª—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ —Ç–æ–≤–∞—Ä).
        // 5. –§–æ—Ä–º—É–≤–∞–Ω–Ω—è –∫—ñ–Ω—Ü–µ–≤–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –¥–ª—è –∫–ª—ñ—î–Ω—Ç–∞.
        // 6. –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–∞–∑–∞–¥ –≤ Instagram (—á–µ—Ä–µ–∑ —Å–µ—Ä–≤—ñ—Å Instagram API, —è–∫–∏–π –º–∏ —Å—Ç–≤–æ—Ä–∏–º–æ).

        // –ü–æ–∫–∏ —â–æ –ø—Ä–æ—Å—Ç–æ —Å–∏–º—É–ª—é—î–º–æ —è–∫—É—Å—å –æ–±—Ä–æ–±–∫—É
        const replyText = `–õ–µ–≥–æ–ª–∞—Å –ø–æ—á—É–≤: "${messageText}". –°–∫–æ—Ä–æ –≤—ñ–¥–ø–æ–≤—ñ–º!`;
        console.log(`–õ–µ–≥–æ–ª–∞—Å –≥–æ—Ç—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å: "${replyText}" –¥–ª—è ${senderId}`);
        
        // TODO: –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤—ñ–¥–ø—Ä–∞–≤–∫—É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤ Instagram
        // await sendInstagramMessage(senderId, replyText);
        console.log(`--- –ö—ñ–Ω–µ—Ü—å –æ–±—Ä–æ–±–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –õ–µ–≥–æ–ª–∞—Å–æ–º ---`);
    }

    // –¢—É—Ç –º–æ–∂—É—Ç—å –±—É—Ç–∏ —ñ–Ω—à—ñ –º–µ—Ç–æ–¥–∏, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–ª—è –≤–∏–∫–ª–∏–∫—É —Å—É–±–∞–≥–µ–Ω—Ç—ñ–≤,
    // —Ä–æ–±–æ—Ç–∏ –∑ –ø–∞–º'—è—Ç—Ç—é, —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ —Ç–æ—â–æ.
}

// –ï–∫—Å–ø–æ—Ä—Ç—É—î–º–æ –µ–∫–∑–µ–º–ø–ª—è—Ä –∞–≥–µ–Ω—Ç–∞, —â–æ–± –≤—ñ–Ω –±—É–≤ —Å—ñ–Ω–≥–ª—Ç–æ–Ω–æ–º (–æ–¥–∏–Ω –Ω–∞ –≤–µ—Å—å –¥–æ–¥–∞—Ç–æ–∫)
// –¶–µ —Å–ø—Ä–æ—Å—Ç–∏—Ç—å –¥–æ—Å—Ç—É–ø –¥–æ –Ω—å–æ–≥–æ –∑ —ñ–Ω—à–∏—Ö —á–∞—Å—Ç–∏–Ω –∫–æ–¥—É.
export const legolasAgent = new LegolasAgent(); 